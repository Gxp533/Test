# 单调队列

一种线性数据结构，一般用数字q[N]和两个遍历h，t储存，分别表示队首和队尾

入队:q[t++]=x

出队：h++

查询队首：q[h]

## 滑窗最值

给定序列a[1..n]，求每个长度为k的子区间的区间最大值

```c++
h=1,t=0;
for(i=1;i<=n;i++)
{
    //i加入队列
    while(h<=t&&a[q[t]]<=a[i])
        t--;
    q[++t]=i;
    //查询i所在的区间的最大值
    if(i>=k)
    {
        while(h<=t&&q[h]<i-k+1)
            h++;
        if(h<=t)
            ans=a[q[h]];
    }
}
```

## 子序列和的最值

给定序列a[1..n]，求长度在[S,T]之间的子序列和的最大值

使用前缀和维护，有

```c++
for(int i=1;i<=n;i++)
    pre[i]=pre[i-1]+a[i];
int h=1,t=0,res=INT_MIN;
for(int i=s;i<=n;i++)
{
    //队列存的下标，若小于i-t则会超出长度
    //规定了上界
    if(h<=t&&q[h]<i-t)
        h++;
    //与当前下标相差为s的值进行比较
    //与当前下标相差为s则与下一位i+1相差为s+1，以此类推s+2，s+3...均比s大
    //规定了下界
    while(h<=t&&pre[q[h]]>pre[i-s])
        t--;
    q[++t]=i-s;
    res=max(res,pre[i]-pre[q[head]]);
}
```

